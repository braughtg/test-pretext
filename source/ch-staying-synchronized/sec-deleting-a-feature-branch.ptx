<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="topic-deleting-a-feature-branch" xmlns:xi="http://www.w3.org/2001/XInclude" >
  <title>Deleting a Feature Branch</title>

  <introduction>
    <p>
      Once your changes have been merged into the upstream <c>main</c>, and you have synchronized, there is no need for you to retain your feature branch.
      There is no harm in keeping it.
      But most developers will delete them to avoid having their repos become cluttered with old feature branches.
    </p>

    <p>
      <figure xml:id="fig-deleting-feature-branch" >
        <caption> Deleting Feature Branches. </caption>
        <image source="images/ch-staying-synchronized/deleting-feature-branch.png" width="75%">
          <description>
            Cloud image of the feature branch.
          </description>
        </image>
      </figure>
    </p>

    <p>
      <xref ref="fig-deleting-feature-branch"/> shows the state that will result after deleting the feature branch from your local and origin repositories.
    </p>
  </introduction>

  <exercises>
  <title />
  <exercise xml:id="ex-deleting-feature-branch" label="ex-deleting-feature-branch">
    <introduction>
      <p>
        The first step is to delete the feature branch from your local repository.
        This exercise will walk you through that process.
      </p>
    </introduction>


    <task xml:id="ex-deleting-feature-branch-step-order" label="ex-deleting-feature-branch-step-order" >
      <statement>
        <p>
          It is not possible to delete the active branch.
          Drag the commands needed to switch from your feature branch to the <c>main</c> branch and then list all of the branches in your local repository.
          Not all commands will be used.
        </p>
      </statement>
      <blocks> <block order="1">
      <p>
        <c>git switch main</c>
      </p>
      </block> <block correct="no">

      <p>
        <c>git log</c>
      </p>
      </block> <block order="2">

      <p>
        <c>git branch</c>
      </p>
      </block> <block correct="no">

      <p>
        <c>git switch &lt;feature branch name&gt;</c>
      </p>
      </block> <block correct="no">

      <p>
        <c>git status</c>
      </p>
      </block> </blocks>

      <hint>
        <p>
          You will need two commands, the first one to switch to your branch and the second to check what the local branches are.
        </p>
      </hint>
    </task>


    <task xml:id="ex-deleting-feature-branch-a" label="ex-deleting-feature-branch-a">
      <statement>
        <p>
          So, if you have not already, switch from your feature branch to the <c>main</c> branch.
          Then give a command that lists all of the branches in your local repository.
        </p>

        <p>
          Which command did you type to list the local branches?
        </p>
      </statement>


      <choices randomize="yes">
        <choice>
          <statement>
            <p>
              <c>git switch</c>
            </p>
          </statement>

          <feedback>
            <p>
              The <c>git switch</c> command is used to change the active branch.
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              <c>git pull</c>
            </p>
          </statement>

          <feedback>
            <p>
              The <c>git pull</c> command is used to pull changes from a remote repository to your local repository.
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              <c>git commit</c>
            </p>
          </statement>

          <feedback>
            <p>
              The <c>git commit</c> command is used to commit staged changes to the repository.
            </p>
          </feedback>
        </choice>

        <choice correct="yes">
          <statement>
            <p>
              <c>git branch</c>
            </p>
          </statement>

          <feedback>
            <p>
              Correct! The <c>git branch</c> command is used to display all of branches in your local repository.
            </p>
          </feedback>
        </choice>
      </choices>

      <hint>
        <p>
          Refer back to the section on switching branches <xref ref="topic-switching-branches"/>
        </p>
      </hint>
    </task>


    <task xml:id="ex-deleting-feature-branch-b" label="ex-deleting-feature-branch-b">
      <statement>
        <p>
          From the output provided by <xref ref="ex-deleting-feature-branch-a"/> how do you know which is the active branch?
        </p>
      </statement>


      <choices randomize="yes">
        <choice correct="yes">
          <statement>
            <p>
              It has an * next to it.
            </p>
          </statement>
        </choice>

        <choice correct="yes">
          <statement>
            <p>
              It appears in green.
            </p>
          </statement>
        </choice>

        <choice>
          <statement>
            <p>
              It appears in bold.
            </p>
          </statement>
        </choice>

        <choice>
          <statement>
            <p>
              It appears in italics.
            </p>
          </statement>
        </choice>

        <choice>
          <statement>
            <p>
              It is not possible to tell the active branch based upon the output provided.
            </p>
          </statement>
        </choice>
      </choices>

      <hint>
        <p>
          Refer back to the section on switching branches <xref ref="topic-switching-branches"/>
        </p>
      </hint>
    </task>
  </exercise>

  <exercise xml:id="ex-deleting-feature-branch-c" label="ex-deleting-feature-branch-c">
    <statement>
      <p>
        The command <c>git branch -D &lt;branch&gt;</c> will delete a branch from your local repository.
      </p>
    </statement>

    <statement>
      <p>
        Type the modified <c>git branch</c> command below.
      </p>

      <p>
        <var width="45" />
      </p>
    </statement>
    <setup> <var> <condition string="^git branch -D (?!main)[^&lt;].+[^&gt;]$">
    <feedback>
      <p>
        Thank you.
      </p>
    </feedback>
    </condition> <condition string=".*">

    <feedback>
      <p>
        Please give the full <c>git branch</c> command using the format indicated in the question.
        Be sure not to leave in the &lt; and &gt; symbols.
        Replace the word branch with your feature branch name.
      </p>
    </feedback>
    </condition> </var> </setup>
  </exercise>

  <exercise xml:id="ex-deleting-feature-branch-d" label="ex-deleting-feature-branch-d">
    <statement>
      <p>
        Type the command from <xref ref="ex-deleting-feature-branch-c"/>.
        Look at the output provided.
        Which of the following did you see?
      </p>
    </statement>


    <choices randomize="yes">
      <choice correct="yes">
        <statement>
          <p>
            Deleted branch (was &lt;SHA code here&gt;)
          </p>
        </statement>

        <feedback>
          <p>
            Correct!
          </p>
        </feedback>
      </choice>

      <choice>
        <statement>
          <p>
            error: branch &lt;branch&gt; not found.
          </p>
        </statement>

        <feedback>
          <p>
            Return to <xref ref="ex-deleting-feature-branch-c"/> and try again.
          </p>
        </feedback>
      </choice>

      <choice>
        <statement>
          <p>
            branch deleted
          </p>
        </statement>

        <feedback>
          <p>
            Look at your output again.
          </p>
        </feedback>
      </choice>

      <choice>
        <statement>
          <p>
            there are no active branches
          </p>
        </statement>

        <feedback>
          <p>
            Look at your output again.
          </p>
        </feedback>
      </choice>
    </choices>

    <hint>
      <p>
        Look at your terminal window to see what appears after the <c>git branch</c> command you typed.
      </p>
    </hint>
  </exercise>
  <!--
  <exercise xml:id="ex-deleting-feature-branch-d" label="ex-deleting-feature-branch-d">
    <statement>
      <p>
        Type the command from <xref ref="ex-deleting-feature-branch-c"/>.
        Look at the output provided.
        How can you check if your branch was deleted?  Be sure to check that it was deleted.
        If not return to <xref ref="ex-deleting-feature-branch-b"/> and try again.
      </p>
    </statement>
    <response />
  </exercise>
  -->
  <exercise xml:id="ex-deleting-feature-branch-on-github" label="ex-deleting-feature-branch-on-github">
    <introduction>
      <p>
        In the previous exercise you deleted your feature branch from your local repository.
      </p>
    </introduction>


    <task xml:id="ex-deleting-feature-branch-on-github-b" label="ex-deleting-feature-branch-on-github-b">
      <statement>
        <p>
          How can you check if your feature branch exists in your <c>origin</c> repo on GitHub?
        </p>
      </statement>


      <choices randomize="yes">
        <choice correct="yes">
          <statement>
            <p>
              Go to the GitHub origin repo and click on the branches button.
            </p>
          </statement>

          <feedback>
            <p>
              Correct!
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              type <c>&lt;git branch&gt;</c>
            </p>
          </statement>

          <feedback>
            <p>
              This command shows the local branches.
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              type <c>git branch -D &lt;branch&gt;</c>
            </p>
          </statement>

          <feedback>
            <p>
              This command will delete a local branch
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              There is no way to check for branches on GitHub.
            </p>
          </statement>

          <feedback>
            <p>
              Take another look at the GitHub interface.
            </p>
          </feedback>
        </choice>
      </choices>

      <hint>
        <p>
          Go to the origin repository on GitHub and look at the options.
        </p>
      </hint>
    </task>


    <task xml:id="ex-deleting-feature-branch-on-github-a" label="ex-deleting-feature-branch-on-github-a">
      <statement correct="false">
        <p>
          This feature branch no longer exists in your <c>origin</c> repo on GitHub.
        </p>
      </statement>

      <feedback>
        <p>
          You have only deleted the feature branch in your local repository.
          It still exists in your <c>origin</c> repository on GitHub.
        </p>
      </feedback>

      <hint>
        <p>
          Make sure you look at your repository on GitHub and click the "Branches" link.
        </p>
      </hint>
    </task>
  </exercise>

  <exercise xml:id="ex-deleting-feature-branch-on-github-c" label="ex-deleting-feature-branch-on-github-c">
    <statement>
      <p>
        You can delete your feature branch from your origin repo using the git CLI.
        The command
      </p>

      <p>
        <c>git push -d &lt;remote&gt; &lt;branch&gt;</c>
      </p>

      <p>
        will delete the specified branch from the specified remote repository.
        Use this command to delete your feature branch from your origin repo.
      </p>

      <p>
        <var width="45" />
      </p>
    </statement>
    <setup> <var> <condition string="^git push -d origin (?!main)[^&lt;].+[^&gt;]$">
    <feedback>
      <p>
        Thank you.
      </p>
    </feedback>
    </condition> <condition string=".*">

    <feedback>
      <p>
        Please give the full <c>git push -d</c> command using the format indicated in the question.
        Be sure not to leave in the &lt; and &gt; symbols.
        Replace the word remote with your origina and branch with your feature branch name.
      </p>
    </feedback>
    </condition> </var> </setup>
  </exercise>

  <exercise>
    <task xml:id="ex-deleting-feature-branch-on-github-d" label="ex-deleting-feature-branch-on-github-d">
      <statement>
        <p>
          Type the command from <xref ref="ex-deleting-feature-branch-on-github-c"/>.
          Look at the output provided.
          Which of the following did you see?
        </p>
        <!--
        <p>
          ex-deleting-feature-branch-on-github-c Use your browser as you did in <xref ref="ex-deleting-feature-branch-on-github-a"/> to confirm that your feature branch is deleted from your origin repo on GitHub.
          If it has not been deleted, revisit <xref ref="ex-deleting-feature-branch-on-github-c"/> and try again.
        </p>
        -->
      </statement>


      <choices randomize="yes">
        <choice correct="yes">
          <statement>
            <p>
              [deleted] &lt;branch&gt;
            </p>
          </statement>

          <feedback>
            <p>
              Correct!
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              error: unable to delete '&lt;branch&gt;': remote ref does not exist
            </p>
          </statement>

          <feedback>
            <p>
              Make sure the branch exists in the remote repo (see <xref ref="ex-deleting-feature-branch-on-github-c"/>).
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              delete completed
            </p>
          </statement>

          <feedback>
            <p>
              Look again at the output provided in the terminal window.
            </p>
          </feedback>
        </choice>

        <choice>
          <statement>
            <p>
              origin updated
            </p>
          </statement>

          <feedback>
            <p>
              Look again at the output provided in the terminal window.
            </p>
          </feedback>
        </choice>
      </choices>

      <hint>
        <p>
          Use your browser as you did in <xref ref="ex-deleting-feature-branch-on-github-a"/> to see if your feature branch has been deleted from your origin repo on GitHub.
        </p>
      </hint>
    </task>


    <task xml:id="ex-deleting-feature-branch-on-github-e" label="ex-deleting-feature-branch-on-github-e">
      <statement>
        <p>
          Use your browser as you did in <xref ref="ex-deleting-feature-branch-on-github-b"/> to confirm that your feature branch is deleted from your origin repo on GitHub.
          If it has not been deleted, revisit <xref ref="ex-deleting-feature-branch-on-github-c"/> and try again.
        </p>
      </statement>
    </task>
  </exercise>
  </exercises>
</section>
